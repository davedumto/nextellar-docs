---
title: API Reference
description: Core API reference for Nextellar SDK utilities, clients, and type definitions
---

# API Reference

This page documents the core utilities, configuration, and type definitions available in Nextellar projects. For React hooks, see the [Hooks documentation](/docs/hooks).

---

## Wallet Kit

Nextellar uses `@creit.tech/stellar-wallets-kit` for multi-wallet support.

### Kit Instance

```typescript
// src/lib/stellar-wallet-kit.ts
import { kit, getKit, signTransaction } from '@/lib/stellar-wallet-kit';
```

### `getKit()`

Returns the StellarWalletsKit singleton instance.

```typescript
const kit = getKit();
```

### `kit.openModal(options)`

Opens the wallet selection modal.

```typescript
await kit.openModal({
  modalTitle: 'Connect to your favorite wallet',
  onWalletSelected: async (option) => {
    kit.setWallet(option.id);
    const { address } = await kit.getAddress();
    // Handle connection
  },
});
```

### `kit.signTransaction(xdr, options)`

Signs a transaction XDR using the connected wallet.

```typescript
const { signedTxXdr } = await kit.signTransaction(unsignedXdr, {
  address: publicKey,
  networkPassphrase: Networks.TESTNET,
});
```

### `kit.disconnect()`

Disconnects the current wallet session.

```typescript
await kit.disconnect();
```

### `signTransaction(props)`

Utility function for signing transactions with automatic network detection.

```typescript
import { signTransaction } from '@/lib/stellar-wallet-kit';

const signedXdr = await signTransaction({
  unsignedTransaction: xdr,
  address: publicKey,
});
```

---

## Stellar SDK

Nextellar projects include `@stellar/stellar-sdk` for blockchain interactions.

### Horizon Server

```typescript
import { Horizon } from '@stellar/stellar-sdk';

const server = new Horizon.Server('https://horizon-testnet.stellar.org');

// Fetch account
const account = await server.accounts().accountId(publicKey).call();

// Load account for transaction building
const sourceAccount = await server.loadAccount(publicKey);

// Submit transaction
const result = await server.submitTransaction(transaction);
```

### Soroban RPC

```typescript
import { rpc } from '@stellar/stellar-sdk';

const rpcServer = new rpc.Server('https://soroban-testnet.stellar.org');

// Simulate transaction
const simulation = await rpcServer.simulateTransaction(transaction);

// Send transaction
const result = await rpcServer.sendTransaction(transaction);
```

### Transaction Building

```typescript
import {
  TransactionBuilder,
  Operation,
  Asset,
  Networks,
  BASE_FEE,
} from '@stellar/stellar-sdk';

// Build a payment transaction
const transaction = new TransactionBuilder(sourceAccount, {
  fee: BASE_FEE,
  networkPassphrase: Networks.TESTNET,
})
  .addOperation(
    Operation.payment({
      destination: recipientAddress,
      asset: Asset.native(),
      amount: '10',
    })
  )
  .setTimeout(30)
  .build();
```

### Assets

```typescript
import { Asset } from '@stellar/stellar-sdk';

// Native XLM
const xlm = Asset.native();

// Custom asset
const usdc = new Asset(
  'USDC',
  'GA5ZSEJYB37JRC5AVCIA5MOP4RHTM335X2KGX3IHOJAPP5RE34K4KZVN'
);
```

### Networks

```typescript
import { Networks } from '@stellar/stellar-sdk';

Networks.TESTNET; // 'Test SDF Network ; September 2015'
Networks.PUBLIC; // 'Public Global Stellar Network ; September 2015'
```

---

## Type Definitions

### Balance

```typescript
interface Balance {
  asset_type: string; // 'native' | 'credit_alphanum4' | 'credit_alphanum12'
  asset_code?: string;
  asset_issuer?: string;
  balance: string;
  limit?: string;
}
```

### Trustline

```typescript
interface Trustline {
  asset_code: string;
  asset_issuer: string;
  limit?: string;
  balance?: string;
  authorized?: boolean;
}
```

### PaymentOptions

```typescript
interface PaymentOptions {
  to: string;
  amount: string;
  asset?: 'XLM' | { code: string; issuer: string };
  memo?: string;
}
```

### PaymentParams

```typescript
interface PaymentParams {
  from: string;
  to: string;
  amount: string;
  asset?: 'XLM' | { code: string; issuer: string };
  memo?: string;
}
```

### PaymentResult

```typescript
interface PaymentResult {
  success: boolean;
  txHash?: string;
  raw?: unknown;
  error?: string;
}
```

### WalletContextState

```typescript
interface WalletContextState {
  connected: boolean;
  publicKey?: string;
  walletName?: string;
  balances: Balance[];
  connect: () => Promise<void>;
  disconnect: () => void;
  refreshBalances: () => Promise<void>;
  sendPayment?: (opts: PaymentOptions) => Promise<TransactionResponse>;
}
```

### WalletConfigContextState

```typescript
interface WalletConfigContextState {
  horizonUrl: string;
  network: string;
}
```

---

## Validation Utilities

The hooks include built-in validation:

### Public Key Validation

```typescript
// Public keys are 56 characters starting with 'G'
const isValid = key.length === 56 && key.startsWith('G');
```

### Secret Key Validation

```typescript
// Secret keys are 56 characters starting with 'S'
const isValid = secret.length === 56 && secret.startsWith('S');
```

### Amount Validation

```typescript
// Must be positive and within Stellar limits
const isValid = amount > 0 && amount <= 922337203685.4775807;
```

### Memo Validation

```typescript
// Text memos cannot exceed 28 characters
const isValid = memo.length <= 28;
```

---

## Environment Variables

Recommended environment variables for production:

```bash
NEXT_PUBLIC_HORIZON_URL=https://horizon.stellar.org
NEXT_PUBLIC_NETWORK=PUBLIC
NEXT_PUBLIC_SOROBAN_RPC=https://soroban-rpc.stellar.org
```

---

## Related

- [Hooks Overview](/docs/hooks) - React hooks reference
- [Wallet Integration](/docs/sdk/wallet-integration) - Multi-wallet setup guide
- [CLI Reference](/docs/cli/commands) - Scaffolding options
