---
title: ConnectWalletButton
description: Pre-built wallet connection button component with multi-wallet support and persistence
---

# ConnectWalletButton

The `WalletConnectButton` is a pre-built, production-ready component for connecting to Stellar wallets. It provides a seamless user experience with loading states, wallet selection, and automatic session persistence.

## Features

- **Multi-Wallet Support**: Freighter, Albedo, Lobstr, xBull, Hana
- **Session Persistence**: Auto-reconnects on page reload
- **Theme Support**: Light and dark mode variants
- **Loading States**: Visual feedback during connection
- **Responsive**: Works on desktop and mobile
- **Custom Modal**: Branded wallet selection dialog

## Basic Usage

```tsx
import WalletConnectButton from '@/components/WalletConnectButton';

export default function Header() {
  return (
    <header className="flex justify-between items-center p-4">
      <h1>My Stellar App</h1>
      <WalletConnectButton />
    </header>
  );
}
```

## Props

```typescript
interface WalletConnectButtonProps {
  theme?: 'light' | 'dark';
}
```

| Prop    | Type                | Default   | Description         |
| ------- | ------------------- | --------- | ------------------- |
| `theme` | `'light' \| 'dark'` | `'light'` | Button color scheme |

## Theme Variants

### Light Theme (Default)

```tsx
<WalletConnectButton theme="light" />
```

Renders a black button with white text - ideal for light backgrounds.

### Dark Theme

```tsx
<WalletConnectButton theme="dark" />
```

Renders a white button with black text - ideal for dark backgrounds.

## How It Works

### Connection Flow

1. User clicks "Connect Wallet"
2. Wallet selection modal opens (powered by `stellar-wallets-kit`)
3. User selects their preferred wallet
4. Wallet extension prompts for approval
5. On approval, public key is retrieved
6. Button text changes to "Disconnect [WalletName]"

### Session Persistence

The component integrates with `WalletProvider` which automatically:

- **Saves** connection status to localStorage on connect
- **Restores** wallet session on page reload
- **Clears** storage on disconnect

```tsx
// Storage keys used internally:
localStorage.setItem('stellar_wallet_connected', 'true');
localStorage.setItem('stellar_wallet_id', 'freighter');
localStorage.setItem('stellar_wallet_address', 'GABC...');
localStorage.setItem('stellar_wallet_name', 'Freighter');
```

## Integration with WalletProvider

The button must be used within a `WalletProvider` context:

```tsx
// app/layout.tsx
import { WalletProvider } from '@/contexts';

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html>
      <body>
        <WalletProvider>{children}</WalletProvider>
      </body>
    </html>
  );
}
```

## Accessing Wallet State

After connection, use the `useWallet` hook to access wallet state:

```tsx
import { useWallet } from '@/contexts';

function AccountInfo() {
  const { connected, publicKey, walletName, balances } = useWallet();

  if (!connected) return null;

  return (
    <div>
      <p>Connected via {walletName}</p>
      <p>Address: {publicKey}</p>
      <p>Balance: {balances[0]?.balance} XLM</p>
    </div>
  );
}
```

## Button States

The button displays different content based on state:

| State         | Button Text               | Icon        |
| ------------- | ------------------------- | ----------- |
| Disconnected  | "Connect Wallet"          | Wallet icon |
| Connecting    | "Connecting..."           | Spinner     |
| Connected     | "Disconnect [WalletName]" | Wallet icon |
| Disconnecting | "Disconnecting..."        | Spinner     |

## Customization

### Custom Styling

Override the default styles with Tailwind classes:

```tsx
// Create a wrapper component
function CustomWalletButton() {
  const { connected, connect, disconnect, walletName } = useWallet();

  return (
    <button
      onClick={connected ? disconnect : connect}
      className="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-2 rounded-lg"
    >
      {connected ? `Connected: ${walletName}` : 'Connect'}
    </button>
  );
}
```

### With Dropdown Menu

For a more advanced UI with account options:

```tsx
function WalletDropdown() {
  const { connected, publicKey, disconnect, balances } = useWallet();
  const [open, setOpen] = useState(false);

  if (!connected) {
    return <WalletConnectButton />;
  }

  return (
    <div className="relative">
      <button
        onClick={() => setOpen(!open)}
        className="flex items-center gap-2"
      >
        <span>{publicKey?.slice(0, 8)}...</span>
        <ChevronDown />
      </button>

      {open && (
        <div className="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg">
          <div className="p-3 border-b">
            <p className="text-sm text-gray-500">Balance</p>
            <p className="font-bold">{balances[0]?.balance} XLM</p>
          </div>
          <button
            onClick={disconnect}
            className="w-full text-left px-3 py-2 text-red-600 hover:bg-gray-100"
          >
            Disconnect
          </button>
        </div>
      )}
    </div>
  );
}
```

## Error Handling

Handle connection errors gracefully:

```tsx
function SafeWalletButton() {
  const { connect } = useWallet();
  const [error, setError] = useState<string | null>(null);

  const handleConnect = async () => {
    try {
      setError(null);
      await connect();
    } catch (err) {
      if (err.message.includes('rejected')) {
        setError('Connection was rejected');
      } else if (err.message.includes('not installed')) {
        setError('Please install a Stellar wallet');
      } else {
        setError('Connection failed');
      }
    }
  };

  return (
    <div>
      <button onClick={handleConnect}>Connect</button>
      {error && <p className="text-red-500 text-sm">{error}</p>}
    </div>
  );
}
```

## Supported Wallets

The button supports these wallets out of the box:

| Wallet        | Type              | Installation                           |
| ------------- | ----------------- | -------------------------------------- |
| **Freighter** | Browser Extension | [freighter.app](https://freighter.app) |
| **Albedo**    | Web-based         | No installation needed                 |
| **Lobstr**    | Browser Extension | [lobstr.co](https://lobstr.co)         |

## Source Code

The component is located at:

```
src/components/WalletConnectButton.tsx
```

## Related

- [WalletProvider](/docs/hooks/wallet-provider) - Context provider for wallet state
- [useStellarWallet](/docs/hooks/use-stellar-wallet) - Standalone wallet hook
- [Wallet Integration Guide](/docs/sdk/wallet-integration) - Multi-wallet setup
